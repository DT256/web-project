<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout.html}">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home Page</title>
    <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
            rel="stylesheet">
    <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <style>
        .product-content h4 {
            height: 48px; /* Đặt chiều cao cố định (tùy chỉnh theo thiết kế của bạn) */
            overflow: hidden; /* Ẩn phần chữ vượt quá chiều cao */
            text-overflow: ellipsis; /* Thêm dấu "..." nếu vượt quá không gian */
            display: -webkit-box; /* Sử dụng cấu trúc box để giới hạn số dòng */
            -webkit-line-clamp: 3; /* Giới hạn hiển thị tối đa 2 dòng */
            -webkit-box-orient: vertical; /* Đặt hướng box là dọc */
            font-size: 16px; /* Kích thước chữ (tuỳ chỉnh theo ý bạn) */
            line-height: 1.5; /* Giãn dòng để đảm bảo đẹp mắt */
            text-align: center; /* Canh giữa nội dung */
        }
        .product-custom {
            flex: 0 0 19%; /* Chiếm khoảng 19% chiều rộng (tương đương 5 sản phẩm trên 1 hàng) */
            max-width: 19%;
            margin: 0.5%; /* Tạo khoảng cách giữa các sản phẩm */
            box-sizing: border-box; /* Đảm bảo padding và border không ảnh hưởng đến kích thước sản phẩm */
        }

    </style>

</head>
<body>
<section class="row" layout:fragment="content">
    <div class="wrapper box-layout">
        <!-- hero slider start -->
        <div class="hero-slider-area mb-5">
            <div class="container">
                <div class="slider-wrapper-area3">
                    <div class="hero-slider-active hero__3 slick-dot-style hero-dot">
                        <div class="single-slider d-flex align-items-center" style="background-image: url(/assets/img/slider/slider3_bg1.jpg);">
                            <div class="container">
                                <div class="slider-main-content">
                                    <div class="slider-text">
                                        <h2>our new range of</h2>
                                        <h1>woman</h1>
                                        <h5>for less than $199.00</h5>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="single-slider d-flex align-items-center" style="background-image: url(/assets/img/slider/slider3_bg2.jpg);">
                            <div class="container">
                                <div class="slider-main-content">
                                    <div class="slider-text">
                                        <h2>shopping bag</h2>
                                        <h4>fashion collection 2018</h4>
                                        <p>for less than $199.00</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- hero slider end -->

        <!-- latest product start -->
        <!--        <div class="latest-product pt-md-30 pt-lg-30 pt-sm-30">-->
        <!--            <div class="container">-->
        <!--                <div class="section-title mb-30">-->
        <!--                    <div class="title-icon">-->
        <!--                        <i class="fa fa-flash"></i>-->
        <!--                    </div>-->
        <!--                    <h3>Sản Phẩm Mới Nhất</h3>-->
        <!--                </div>-->
        <!--                &lt;!&ndash; featured category start &ndash;&gt;-->
        <!--                <div class="latest-product-active slick-padding slick-arrow-style">-->
        <!--                    &lt;!&ndash; Lặp qua danh sách sản phẩm &ndash;&gt;-->
        <!--                    <div th:each="product : ${products}" class="product-item fix">-->
        <!--                        <div class="product-thumb">-->
        <!--                            <a th:href="@{'/product-details/' + ${product.getProductID()}}">-->
        <!--                                <img th:src="@{${product.detail.images.getFirst().imageUrl}}" class="img-pri" alt="">-->
        <!--&lt;!&ndash;                                <img th:src="@{${product.detail.images.getFirst().imageUrl}}" class="img-sec" alt="">&ndash;&gt;-->
        <!--                            </a>-->
        <!--                            <div class="product-label">-->
        <!--&lt;!&ndash;                                <span th:text="${product.getName()}"></span>&ndash;&gt;-->
        <!--                            </div>-->
        <!--                            <div class="product-action-link">-->
        <!--                                <a href="#" data-toggle="modal" data-target="#quick_view">-->
        <!--                                    <span data-toggle="tooltip" data-placement="left" title="Quick view"><i class="fa fa-search"></i></span>-->
        <!--                                </a>-->
        <!--                                <a href="#" data-toggle="tooltip" data-placement="left" title="Wishlist"><i class="fa fa-heart-o"></i></a>-->
        <!--                                <a href="#" data-toggle="tooltip" data-placement="left" title="Compare"><i class="fa fa-refresh"></i></a>-->
        <!--                                <a href="#" data-toggle="tooltip" data-placement="left" title="Add to cart"><i class="fa fa-shopping-cart"></i></a>-->
        <!--                            </div>-->
        <!--                        </div>-->
        <!--                        <div class="product-content">-->
        <!--                            <h4><a th:href="@{'/product-details/' + ${product.getProductID()}}" th:text="${product.getName()}"></a></h4>-->
        <!--                            <div class="pricebox">-->
        <!--                                <span class="regular-price" th:text="${product.getPrice()} + 'đ'"></span>-->
        <!--                                <div class="ratings">-->
        <!--                                    <div class="pro-review">-->
        <!--                                        <span th:text="${1 + ' review(s)'}"></span>-->
        <!--                                    </div>-->
        <!--                                </div>-->
        <!--                            </div>-->
        <!--                        </div>-->
        <!--                    </div>-->
        <!--                    &lt;!&ndash; Kết thúc lặp &ndash;&gt;-->
        <!--                </div>-->
        <!--                &lt;!&ndash; featured category end &ndash;&gt;-->
        <!--            </div>-->
        <!--        </div>-->
        <!-- latest product end -->

        <!--         latest product start-->
        <div class="latest-product pt-md-30 pt-lg-30 pt-sm-30 mb-5">
            <div class="container">
                <div class="section-title mb-30">
                    <div class="title-icon">
                        <i class="fa fa-flash"></i>
                    </div>
                    <h3>Sản Phẩm Mới Nhất</h3>
                </div>
                <div class="row d-flex flex-wrap justify-content-start" id="product-list">
<!--                    &lt;!&ndash; Lặp qua danh sách sản phẩm &ndash;&gt;-->
<!--                    <div th:each="product : ${products}" class="product-item fix product-custom">-->
<!--                        <div class="product-thumb">-->
<!--                            <a th:href="@{'/product-details/' + ${product.getProductID()}}">-->
<!--                                <img th:src="@{${product.detail.images.getFirst().imageUrl}}" class="img-pri" alt="">-->
<!--                            </a>-->
<!--                            <div class="product-action-link">-->
<!--&lt;!&ndash;                                <a href="#" data-toggle="modal" data-target="#quick_view">&ndash;&gt;-->
<!--&lt;!&ndash;                                    <span data-toggle="tooltip" data-placement="left" title="Quick view"><i class="fa fa-search"></i></span>&ndash;&gt;-->
<!--&lt;!&ndash;                                </a>&ndash;&gt;-->
<!--&lt;!&ndash;                                <a href="#" data-toggle="tooltip" data-placement="left" title="Wishlist"><i class="fa fa-heart-o"></i></a>&ndash;&gt;-->
<!--                                <a href="#" data-toggle="tooltip" data-placement="left" title="Compare"><i class="fa fa-refresh"></i></a>-->
<!--                                <a href="#" data-toggle="tooltip" data-placement="left" title="Add to cart"><i class="fa fa-shopping-cart"></i></a>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                        <div class="product-content">-->
<!--                            <h4>-->
<!--                                <a th:href="@{'/product-details/' + ${product.getProductID()}}" th:text="${product.getName()}"></a>-->
<!--                            </h4>-->
<!--                            <div class="pricebox">-->
<!--                                <span class="regular-price" th:text="${product.getPrice()} + 'đ'"></span>-->
<!--                                <div class="ratings">-->
<!--                                    <div class="pro-review">-->
<!--                                        <span th:text="${1 + ' review(s)'}"></span>-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                    &lt;!&ndash; Kết thúc lặp &ndash;&gt;-->


                </div>
            </div>


        </div>
        <!-- latest product end -->

        <!-- San Pham Ban Chay Nhat -->
        <div class="latest-product pt-md-30 pt-lg-30 pt-sm-30">
            <div class="container">
                <div class="section-title mb-30">
                    <div class="title-icon">
                        <i class="fa fa-flash"></i>
                    </div>
                    <h3>Sản Phẩm Bán chạy nhất</h3>
                </div>
                <div class="row d-flex flex-wrap justify-content-start">
                    <!-- Lặp qua danh sách sản phẩm -->
                    <div th:each="product : ${products}" class="product-item fix product-custom">
                        <div class="product-thumb">
                            <a th:href="@{'/product-details/' + ${product.getProductID()}}">
                                <img th:src="@{${product.detail.images.getFirst().imageUrl}}" class="img-pri" alt="">
                            </a>
                            <div class="product-action-link">
                                <!--                                <a href="#" data-toggle="modal" data-target="#quick_view">-->
                                <!--                                    <span data-toggle="tooltip" data-placement="left" title="Quick view"><i class="fa fa-search"></i></span>-->
                                <!--                                </a>-->
                                <!--                                <a href="#" data-toggle="tooltip" data-placement="left" title="Wishlist"><i class="fa fa-heart-o"></i></a>-->
                                <a href="#" data-toggle="tooltip" data-placement="left" title="Compare"><i class="fa fa-refresh"></i></a>
                                <a href="#" data-toggle="tooltip" data-placement="left" title="Add to cart"><i class="fa fa-shopping-cart"></i></a>
                            </div>
                        </div>
                        <div class="product-content">
                            <h4>
                                <a th:href="@{'/product-details/' + ${product.getProductID()}}" th:text="${product.getName()}"></a>
                            </h4>
                            <div class="pricebox">
                                <span class="regular-price" th:text="${product.getPrice()} + 'đ'"></span>
                                <div class="ratings">
                                    <div class="pro-review">
                                        <span th:text="${1 + ' review(s)'}"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Kết thúc lặp -->
                </div>
            </div>
        </div>
        <!-- San Pham Ban Chay Nhat end -->


        <!-- brand area start -->
        <div class="brand-area pt-26 pb-30">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <div class="section-title mb-30">
                            <div class="title-icon">
                                <i class="fa fa-crop"></i>
                            </div>
                            <h3>Popular Brand</h3>
                        </div> <!-- section title end -->
                    </div>
                </div>
                <div class="row">
                    <div class="col-12">
                        <div class="brand-active slick-padding slick-arrow-style">
                            <div class="brand-item text-center">
                                <a href="#"><img src="/assets/img/brand/br1.png" alt=""></a>
                            </div>
                            <div class="brand-item text-center">
                                <a href="#"><img src="/assets/img/brand/br2.png" alt=""></a>
                            </div>
                            <div class="brand-item text-center">
                                <a href="#"><img src="/assets/img/brand/br3.png" alt=""></a>
                            </div>
                            <div class="brand-item text-center">
                                <a href="#"><img src="/assets/img/brand/br4.png" alt=""></a>
                            </div>
                            <div class="brand-item text-center">
                                <a href="#"><img src="/assets/img/brand/br5.png" alt=""></a>
                            </div>
                            <div class="brand-item text-center">
                                <a href="#"><img src="/assets/img/brand/br6.png" alt=""></a>
                            </div>
                            <div class="brand-item text-center">
                                <a href="#"><img src="/assets/img/brand/br4.png" alt=""></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- brand area end -->
    </div>

</section>
<script>
    $(document).ready(function () {
        // Gọi API để lấy danh sách sản phẩm
        $.ajax({
            url: '/api/products/latest',
            method: 'GET',
            success: function (products) {
                let productList = $('#product-list');
                productList.empty(); // Xóa nội dung cũ nếu có

                // Lặp qua danh sách sản phẩm và thêm vào HTML
                products.forEach(product => {
                    let productHtml = `
                    <div class="product-item fix product-custom">
                        <div class="product-thumb">
                            <a href="/product-details/${product.id}">
                                <img src="${product.imageUrl}" class="img-pri" alt="">
                            </a>
                            <div class="product-action-link">
                                <a href="#" data-toggle="tooltip" data-placement="left" title="Compare"><i class="fa fa-refresh"></i></a>
                                <a href="#" data-toggle="tooltip" data-placement="left" title="Add to cart"><i class="fa fa-shopping-cart"></i></a>
                            </div>
                        </div>
                        <div class="product-content">
                            <h4>
                                <a href="/product-details/${product.id}">${product.name}</a>
                            </h4>
                            <div class="pricebox">
                                <span class="regular-price">${product.price}đ</span>
                                <div class="ratings">
                                    <div class="pro-review">
                                        <span>1 review(s)</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                    productList.append(productHtml);
                });
            },
            error: function () {
                console.error('Failed to fetch products.');
            }
        });
    });

</script>
</body>
</html>